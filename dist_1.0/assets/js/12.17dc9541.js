(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{489:function(a,t,o){"use strict";o.r(t);var r=o(61),s=Object(r.a)({},(function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[o("h1",{attrs:{id:"定时任务"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#定时任务"}},[a._v("#")]),a._v(" 定时任务")]),a._v(" "),o("h2",{attrs:{id:"指南"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#指南"}},[a._v("#")]),a._v(" 指南")]),a._v(" "),o("p",[a._v("gocore 中的定时任务是以命令的形式存在。gocore 中也定义了一个命令 "),o("code",[a._v("./gocore cron")]),a._v(" 来对定时任务服务进行管理。")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v('about cron command\n\nUsage:\n  gocore cron [flags]\n  gocore cron [command]\n\nAvailable Commands:\n  list        list all cron command\n  restart     restart cron command\n  start       start cron command\n  state       cron serve state\n  stop        stop cron command\n\nFlags:\n  -h, --help   help for cron\n\nUse "gocore cron [command] --help" for more information about a command.\n')])])]),o("h1",{attrs:{id:"创建"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#创建"}},[a._v("#")]),a._v(" 创建")]),a._v(" "),o("p",[a._v("创建一个定时任务和创建命令（command）是一致的。具体参考"),o("a",{attrs:{href:"/guide/command"}},[a._v("command")])]),a._v(" "),o("h1",{attrs:{id:"挂载"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#挂载"}},[a._v("#")]),a._v(" 挂载")]),a._v(" "),o("p",[a._v("和挂载命令稍微有些不同，使用的方法是 "),o("code",[a._v("AddCronCommand")])]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v('rootCmd.AddCronCommand("* * * * *", command.DemoCommand)\n')])])]),o("h1",{attrs:{id:"查询"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[a._v("#")]),a._v(" 查询")]),a._v(" "),o("p",[a._v("查询哪些定时任务挂载在服务上，使用命令 "),o("code",[a._v("./gocore cron list")])]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[~/Documents/workspace/gocore_workspace]$ ./gocore cron list\n* * * * *  demo  demo\n")])])]),o("h1",{attrs:{id:"启动"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),o("p",[a._v("使用命令 "),o("code",[a._v("./gocore cron start")]),a._v(" 启动一个定时服务")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[~/Documents/workspace/gocore_workspace]$ ./gocore cron start\nstart cron job\n[PID] 35453\n")])])]),o("p",[a._v("也可以通过 "),o("code",[a._v("./gocore cron start -d")]),a._v(" 使用 deamon 模式启动一个定时服务")]),a._v(" "),o("p",[a._v("定时服务的输出记录在 "),o("code",[a._v("/storage/log/cron.log")])]),a._v(" "),o("p",[a._v("进程 id 记录在 "),o("code",[a._v("/storage/pid/app.pid")])]),a._v(" "),o("h1",{attrs:{id:"状态"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#状态"}},[a._v("#")]),a._v(" 状态")]),a._v(" "),o("p",[a._v("使用 deamon 模式启动定时服务的时候，可以使用命令 "),o("code",[a._v("./gocore cron state")]),a._v(" 查询定时任务状态")]),a._v(" "),o("h1",{attrs:{id:"停止"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[a._v("#")]),a._v(" 停止")]),a._v(" "),o("p",[a._v("使用 deamon 模式启动定时服务的时候，可以使用命令 "),o("code",[a._v("./gocore cron stop")]),a._v(" 停止定时任务")]),a._v(" "),o("h1",{attrs:{id:"重启"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#重启"}},[a._v("#")]),a._v(" 重启")]),a._v(" "),o("p",[a._v("使用 deamon 模式启动定时服务的时候，可以使用命令 "),o("code",[a._v("./gocore cron restart")]),a._v(" 重启定时任务")]),a._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),o("p",[a._v("如果程序还未启动，调用 restart 命令，效果和 start 命令一样，deamon 模式启动定时服务")])])])}),[],!1,null,null,null);t.default=s.exports}}]);